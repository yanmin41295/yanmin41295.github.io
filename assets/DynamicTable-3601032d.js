import{c as M,b as g,a2 as L,Q as l,S as r,af as o,a9 as i,U as h,a8 as k,ac as y,$ as f,C as d,ap as Q,ad as p,ae as w,aa as C,ag as $,aQ as j}from"./framework-f0f169cb.js";async function F(){return{meta:{id:"userId",pagination:!0},columns:{userId:{label:"用户id",visible:!1},name:{label:"用户名",type:"input",visible:!0},age:{label:"年龄",type:"input",visible:!0},birth:{label:"生日",type:"date",visible:!0},phone:{label:"电话",type:"input",visible:!0},address:{label:"地址",type:"input",visible:!0},operation:{label:"操作",type:"operation",visible:!0}}}}async function H(){return[{userId:1,name:"张三",address:"金沙江路 1518 弄",birth:"2016-05-02",phone:"12345678910"},{userId:2,name:"李四",birth:"2016-05-04",address:"金沙江路 1517 弄",age:19,phone:"12345678911"},{userId:3,name:"王五",birth:"2016-05-01",address:"金沙江路 1519 弄",phone:"12345678912"},{userId:4,name:"赵六",birth:"2016-05-03",address:"金沙江路 1516 弄",phone:"12345678913"}]}const P={key:0},q={key:0,class:"editable-row"},A={key:1,class:"editable-row"},G={class:"editable-row-span"},J={key:1},K={key:0,class:"editable-row"},O={key:1,class:"editable-row"},R={class:"editable-row-span"},W={key:2},X={class:"menu-list",style:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center"}},Z=M({__name:"DynamicTable",setup(ee){const u=g({total:20,size:10,current:1}),_=g({meta:{id:"",pagination:!1},columns:{}}),m=g([]);async function v(t,n){n.editable=!0}async function V(t,n){n.editable=!1,console.log(n)}function D(t){m.splice(t,1)}function z(t){console.log(t);let n={editable:!0,index:t};m.splice(t,0,n)}function I(t){console.log(t);let n={editable:!0,index:t+1};m.splice(t+1,0,n)}return L(async()=>{let t=await F();_.meta=t.meta,_.columns=t.columns;let n=await H();m.push(...n)}),(t,n)=>{const x=d("el-table-column"),U=d("el-input"),T=d("el-date-picker"),B=d("Edit"),E=d("el-icon"),b=d("el-button"),N=d("el-popover"),S=d("el-table"),Y=d("el-pagination");return l(),r(f,null,[o(S,{data:m,border:!0,"row-key":_.meta.id},{default:i(()=>[o(x,{label:"序号",type:"index",width:"60px"}),(l(!0),r(f,null,Q(_.columns,(a,c)=>(l(),r(f,null,[a.visible?(l(),k(x,{key:c,label:a.label,prop:c},{header:i(()=>[p(w(a.label),1)]),default:i(e=>[a.type=="input"?(l(),r("div",P,[e.row.editable?(l(),r("div",q,[o(U,{size:"small",modelValue:e.row[c],"onUpdate:modelValue":s=>e.row[c]=s,placeholder:`请输入${a.label}`,onChange:s=>v(e.$index,e.row)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])])):(l(),r("div",A,[h("span",G,w(e.row[c]),1)]))])):a.type==="date"?(l(),r("div",J,[e.row.editable?(l(),r("div",K,[o(T,{modelValue:e.row[c],"onUpdate:modelValue":s=>e.row[c]=s,type:"date","value-format":"YYYY-MM-DD",placeholder:`请输入${a.label}`,onChange:s=>v(e.$index,e.row)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])])):(l(),r("div",O,[h("span",R,w(e.row[c]),1)]))])):a.type==="operation"?(l(),r("div",W,[o(N,{placement:"right-start",width:120,trigger:"hover",content:"this is content, this is content, this is content"},{reference:i(()=>[o(E,{class:"icon",size:18,width:"20px"},{default:i(()=>[o(B)]),_:1})]),default:i(()=>[h("div",X,[o(b,{onClick:s=>z(e.$index),type:"primary",style:{width:"120px",margin:"2px"}},{default:i(()=>[p("上方插入一行 ")]),_:2},1032,["onClick"]),o(b,{onClick:s=>I(e.$index),type:"primary",style:{width:"120px",margin:"2px"}},{default:i(()=>[p("下方插入一行 ")]),_:2},1032,["onClick"]),C(o(b,{onClick:s=>e.row.editable=!0,style:{width:"120px",margin:"2px"}},{default:i(()=>[p(" 编辑 ")]),_:2},1032,["onClick"]),[[$,!e.row.editable]]),C(o(b,{type:"success",onClick:s=>V(e.$index,e.row),style:{width:"120px",margin:"2px"}},{default:i(()=>[p("确定 ")]),_:2},1032,["onClick"]),[[$,e.row.editable]]),o(b,{type:"danger",onClick:s=>D(e.$index),style:{width:"120px",margin:"2px"}},{default:i(()=>[p("删除 ")]),_:2},1032,["onClick"])])]),_:2},1024)])):y("v-if",!0)]),_:2},1032,["label","prop"])):y("v-if",!0)],64))),256))]),_:1},8,["data","row-key"]),h("div",null,[_.meta.pagination?(l(),k(Y,{key:0,background:"",layout:"prev, pager, next","current-page":u.current,"onUpdate:currentPage":n[0]||(n[0]=a=>u.current=a),"page-size":u.size,"onUpdate:pageSize":n[1]||(n[1]=a=>u.size=a),total:u.total},null,8,["current-page","page-size","total"])):y("v-if",!0)])],64)}}}),ne=j(Z,[["__file","DynamicTable.vue"]]);export{ne as default};
